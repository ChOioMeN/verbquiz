<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Irregular Verb Trainer</title>
<style>
:root{
  --bg:#020617;
  --panel:#020617;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --accent:#38bdf8;
  --danger:#ef4444;
}
*{box-sizing:border-box;font-family:system-ui,-apple-system,Segoe UI,Roboto}
body{
  margin:0; background:var(--bg); color:var(--text);
  display:flex; align-items:center; justify-content:center;
  min-height:100vh;
}
button{
  background:none; color:var(--text);
  border:1px solid rgba(255,255,255,.15);
  border-radius:12px; padding:12px 18px;
  font-size:16px; cursor:pointer;
}
button:active{transform:scale(.97)}
.hidden{display:none !important}
#app{width:100%; max-width:420px; padding:20px;}
.center{text-align:center}
.word{font-size:32px; margin:24px 0}
input{
  width:100%; padding:14px; font-size:18px;
  border-radius:12px; border:none; outline:none;
}
.stats{display:flex; justify-content:space-between; margin-top:12px; font-size:14px; color:var(--muted)}
.bottomBtns{
  position:fixed; bottom:16px; left:16px; right:16px;
  display:flex; justify-content:space-between;
}
.overlay{
  position:fixed; inset:0; background:var(--panel);
  display:flex; align-items:center; justify-content:center;
  padding:24px; z-index:10;
}
.panel{width:100%; max-width:420px;}
.grid{display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:16px}
.gridItem{border:1px solid rgba(255,255,255,.1); border-radius:10px; padding:10px}
.base{color:var(--accent)}
.shake{animation:shake .35s}
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  75%{transform:translateX(-4px)}
  100%{transform:translateX(0)}
}
</style>
</head>
<body>
<div id="app">
  <!-- MAIN -->
  <div id="main" class="center">
    <h1>Irregular Verb Quiz</h1>
    <button id="startBtn">시작</button>
  </div>

  <!-- QUIZ -->
  <div id="quiz" class="hidden">
    <div class="center">
      <div class="word" id="word"></div>
      <input id="answer" placeholder="과거형 입력" />
      <p id="feedback" class="muted"></p>
      <div class="stats">
        <span id="accuracy">정답률: 0%</span>
        <span id="streak">연속 정답: 0</span>
      </div>
    </div>
  </div>
</div>

<!-- OVERLAY -->
<div id="overlay" class="overlay hidden">
  <div class="panel">
    <h2 id="listTitle"></h2>
    <div id="list" class="grid"></div>
    <div style="margin-top:16px">
      <button id="backBtn">돌아가기</button>
    </div>
  </div>
</div>

<div class="bottomBtns hidden" id="bottomBtns">
  <button id="memoriseBtn">보고 외우기</button>
  <button id="wrongBtn">틀렸던 동사</button>
</div>

<script>
document.addEventListener('DOMContentLoaded',()=>{

// DATA
const verbs=[
  {b:'go',p:'went'},{b:'come',p:'came'},{b:'see',p:'saw'},
  {b:'take',p:'took'},{b:'give',p:'gave'},{b:'get',p:'got'},
  {b:'make',p:'made'},{b:'find',p:'found'},{b:'think',p:'thought'},
  {b:'buy',p:'bought'},{b:'bring',p:'brought'},{b:'teach',p:'taught'},
  {b:'catch',p:'caught'},{b:'feel',p:'felt'},{b:'keep',p:'kept'},
  {b:'leave',p:'left'},{b:'meet',p:'met'},{b:'run',p:'ran'},
  {b:'say',p:'said'},{b:'sit',p:'sat'},{b:'stand',p:'stood'},
  {b:'understand',p:'understood'},{b:'wear',p:'wore'},{b:'write',p:'wrote'}
];

// STATE
let current=null, total=0, correct=0, streak=0;
const wrongSet=new Set();

// ELEMENTS
const main=document.getElementById('main');
const quiz=document.getElementById('quiz');
const wordEl=document.getElementById('word');
const answer=document.getElementById('answer');
const feedback=document.getElementById('feedback');
const accuracy=document.getElementById('accuracy');
const streakEl=document.getElementById('streak');
const bottomBtns=document.getElementById('bottomBtns');
const overlay=document.getElementById('overlay');
const list=document.getElementById('list');
const listTitle=document.getElementById('listTitle');
const memoriseBtn=document.getElementById('memoriseBtn');
const wrongBtn=document.getElementById('wrongBtn');
const backBtn=document.getElementById('backBtn');
const startBtn=document.getElementById('startBtn');

// FUNCTIONS
function pick(){
  current=verbs[Math.floor(Math.random()*verbs.length)];
  wordEl.textContent=current.b;
  answer.value=''; answer.focus();
}
function updateStats(){
  accuracy.textContent=`정답률: ${total?Math.round(correct/total*100):0}%`;
  streakEl.textContent=`연속 정답: ${streak}`;
}
function showList(title,items){
  overlay.classList.remove('hidden');
  listTitle.textContent=title;
  list.innerHTML='';
  if(items.length===0){list.textContent='없음';return;}
  items.forEach(v=>{
    const d=document.createElement('div'); d.className='gridItem';
    d.innerHTML=`<div class=base>${v.b}</div><div>${v.p}</div>`;
    list.appendChild(d);
  });
}

// EVENTS
startBtn.onclick=()=>{
  main.classList.add('hidden'); quiz.classList.remove('hidden');
  bottomBtns.classList.remove('hidden');
  pick();
};

answer.addEventListener('keydown',e=>{
  if(e.key!=='Enter')return;
  total++;
  if(answer.value.trim().toLowerCase()===current.p){
    correct++; streak++; feedback.textContent='정답!';
  }else{
    streak=0; wrongSet.add(current.b);
    feedback.textContent=`정답: ${current.p}`;
  }
  updateStats(); pick();
});

memoriseBtn.onclick=()=>showList('전체 동사',verbs);
wrongBtn.onclick=()=>{
  if(wrongSet.size===0){
    wrongBtn.classList.remove('shake');
    void wrongBtn.offsetWidth;
    wrongBtn.classList.add('shake');
    return;
  }
  const arr=[...wrongSet].map(b=>verbs.find(v=>v.b===b));
  showList('틀렸던 동사',arr);
};
backBtn.onclick=()=>overlay.classList.add('hidden');

});
</script>
</body>
</html>

